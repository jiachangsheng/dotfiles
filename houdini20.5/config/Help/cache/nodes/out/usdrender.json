{"type": "root", "attrs": {"type": "node", "context": "out", "internal": "usdrender", "icon": "ROP/usdrender", "since": "18.0", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["USD Render"], "extent": [0, 15]}, {"type": "summary", "indent": 0, "text": ["Renders an output image from the stage generated by a LOP network."], "extent": [97, 172]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Overview"], "extent": [172, 187], "body": [{"type": "para", "indent": 0, "text": ["This node writes the USD generated by a LOP network to a temp file, then launches an external process (by default, ", {"scheme": null, "value": "/ref/utils/husk", "type": "link", "text": ["husk"], "fullpath": "/ref/utils/husk.html"}, ") to render an image or image sequence from the USD."], "extent": [187, 379]}, {"type": "para", "indent": 0, "text": ["Rendering uses the same USD interface (Hydra) as is used to render the Solaris viewport, but instead of displaying the generated pixel buffers, the renderer saves them to image files. You can choose to render using any Hydra client registered with USD."], "extent": [379, 634]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Configuration"], "extent": [634, 654], "body": [{"type": "para", "indent": 0, "text": ["Traditionally in Houdini, the renderer was configured using parameters on the render node. In USD, however, render settings are stored in a ", {"type": "code", "text": ["RenderSettings"]}, " primitive in the scene tree."], "extent": [654, 842]}, {"type": "para", "indent": 0, "text": ["See the help for the ", {"scheme": "Node", "value": "/nodes/lop/rendersettings", "type": "link", "text": ["Render Settings LOP"], "fullpath": "/nodes/lop/rendersettings.html"}, ", ", {"scheme": "Node", "value": "/nodes/lop/renderproduct", "type": "link", "text": ["Render Product LOP"], "fullpath": "/nodes/lop/renderproduct.html"}, ", and ", {"scheme": "Node", "value": "/nodes/lop/rendervar", "type": "link", "text": ["Render Var LOP"], "fullpath": "/nodes/lop/rendervar.html"}, " for more information about creating USD render settings."], "extent": [842, 1053]}, {"type": "para", "indent": 0, "text": ["The parameters on this node primarily deal with launching the render process, with just a few options to override key options for controlling the render."], "extent": [1053, 1209]}]}, {"level": 2, "id": "list", "container": true, "type": "h", "indent": 0, "text": ["Available renderers"], "extent": [1209, 1242], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["The list of renderers is filtered based on the data returned by the ", {"type": "code", "text": ["usdrenderers.py"]}, " script. The ", {"scheme": null, "value": "/ref/utils/husk", "type": "link", "text": ["husk"], "fullpath": "/ref/utils/husk.html"}, " utility, and by extension the USD Render node, only support renderers that can generate AOV buffers (that is, renderers whose ", {"type": "code", "text": ["aovsupport"]}, " attribute is ", {"type": "code", "text": ["True"]}, ")."], "extent": [1242, 1528]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["To render to other delegates, such as Houdini GL and Storm, that do not support AOV generation, use the ", {"scheme": "Node", "value": "/nodes/out/opengl", "type": "link", "text": ["OpenGL ROP"], "fullpath": "/nodes/out/opengl.html"}, " (this basically updates the viewport and takes a snapshot of its contents)."], "extent": [1528, 1740]}], "container": true}, {"type": "tip_group", "body": [{"type": "tip", "indent": 0, "role": "item", "extent": [2210, 2215], "body": [{"type": "para", "indent": 4, "text": ["You need to make sure the render delegate is found by the USD plug-in search, using the ", {"type": "code", "text": ["PXR_PLUGINPATH_NAME"]}, " environment variable."], "extent": [2245, 2382]}, {"type": "para", "indent": 4, "text": ["You can also set the environment variable ", {"type": "code", "text": ["TF_DEBUG"]}, " to ", {"type": "code", "text": ["PLUG_*"]}, ", which causes the USD library to print out useful information as it scans for and loads plug-ins."], "extent": [2382, 2551]}], "container": true, "attrs": {"id": "render_delegate_tip"}}], "container": true, "role": "item_group"}]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [1786, 1798], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Render to Disk"], "extent": [1798, 1815], "body": [{"type": "para", "indent": 4, "text": ["Renders with the last render control settings. This blocks Houdini until the render completes."], "extent": [1833, 1933]}], "container": true, "attrs": {"id": "execute"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Render to MPlay"], "extent": [1933, 1950], "body": [{"type": "para", "indent": 4, "text": ["Render directly into an MPlay preview window, instead of to an image file. (You can save the image to disk from inside MPlay.)"], "extent": [1974, 2106]}], "container": true, "attrs": {"id": "renderpreview"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Render to Disk in Background"], "extent": [2106, 2136], "body": [{"type": "para", "indent": 4, "text": ["Renders with the last render control settings in a background process."], "extent": [2164, 2240]}], "container": true, "attrs": {"id": "executebackground"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Controls"], "extent": [1829, 1839], "body": [{"type": "para", "indent": 8, "text": ["Click to open a dialog that lets you launch a ", {"type": "q", "text": ["one-off"]}, " render with different frame range and dependency settings."], "extent": [1866, 1990]}], "container": true, "attrs": {"id": "renderdialog"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Valid Frame Range"], "extent": [2268, 2287], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Render Current Frame"], "extent": [2287, 2313], "body": [{"type": "para", "indent": 8, "text": ["Render the current frame number (in the playbar)."], "extent": [2313, 2372]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Render Frame Range"], "extent": [2372, 2396], "body": [{"type": "para", "indent": 8, "text": ["Render each frame in the range set by the ", {"type": "ui", "text": ["Start/End/Inc"]}, " parameters below."], "extent": [2396, 2483]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Render Frame Range (Strict)"], "extent": [2483, 2516], "body": [{"type": "para", "indent": 8, "text": ["The ", {"type": "q", "text": ["Render Frame Range"]}, " option may generate frames outside the given range if they're requested by a render dependency. If you choose this option, this node will never render frames outside the given range."], "extent": [2516, 2733]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Render Frame Range From Stage"], "extent": [2733, 2772], "body": [{"type": "para", "indent": 16, "text": ["Examines the USD stage of the source LOP node for a start and end timecode value. These are used as the start and end of the frame range to render. If the stage does not have this metadata set, executing a render operation will result in an error."], "extent": [2772, 3037]}], "container": true}], "container": true}], "container": true}], "container": true}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Start/End/Inc"], "extent": [3073, 3088], "body": [{"type": "para", "indent": 8, "text": ["When ", {"type": "ui", "text": ["Valid frame range"]}, " is ", {"type": "q", "text": ["Render frame range"]}, " or ", {"type": "q", "text": ["Render frame range (strict)"]}, ", the start and end frames (inclusive) and interval."], "extent": [3104, 3249]}], "container": true, "attrs": {"id": "f"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Preroll/Postroll/Inc"], "extent": [3249, 3271], "body": [{"type": "para", "indent": 8, "text": ["When ", {"type": "ui", "text": ["Valid frame range"]}, " is ", {"type": "q", "text": ["Render stage\u2019s frame range"]}, ", the number of frames before and after the stage\u2019s official start and end frame to save, and the interval between time samples."], "extent": [3293, 3489]}], "container": true, "attrs": {"id": "foffset"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Render All Frames With a Single Process"], "extent": [3077, 3118], "body": [{"type": "para", "indent": 4, "text": ["Render all frames with a single process. Default is off, which causes a new render process to be invoked to render each frame. To render multiple frames with a single process, the render process renders an image then advances the time on the scene and renders the next image (just like how the Solaris viewport plays back animation). If there is a lot of data shared between frames, this can render significantly faster compared to rendering a single frame per process."], "extent": [3144, 3619]}, {"type": "para", "indent": 4, "text": ["If the invocation of a render process is disabled, this setting still affects the behavior of the USD save process. If each frame\u2019s USD is being authored to a separate file or directory, this setting has no effect. But if every frame is configured to author the USD files to the same location, leavng this option off will overwrite the the USD data with each frame, leaving only the final frame\u2019s data in the USD files on disk. Enable this option to have each frame\u2019s data merged with all previous frame\u2019s data, resulting in a USD file that contains data for all frame."], "extent": [3619, 4194]}], "container": true, "attrs": {"id": "allframesatonce"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Render Delegate"], "extent": [4194, 4211], "body": [{"type": "para", "indent": 4, "text": ["The Hydra client to use to render the images. The default is Karma. Alternate Hydra clients must be registered with Houdini\u2019s USD libraries. See how the node gets the ", {"scheme": null, "value": "#list", "type": "link", "text": ["list of available renderers"], "fullpath": "/nodes/out/usdrender.html#list", "fragment": "#list"}, " above."], "extent": [4235, 4450]}], "container": true, "attrs": {"id": "renderdelegate"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["LOP Path"], "extent": [4450, 4460], "body": [{"type": "para", "indent": 4, "text": ["Render the USD stage output by this node. If this is blank, the node uses the node with the display flag."], "extent": [4478, 4589]}], "container": true, "attrs": {"id": "loppath"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Render Settings"], "extent": [4589, 4606], "body": [{"type": "para", "indent": 4, "text": ["Scene graph path to the ", {"type": "code", "text": ["RenderSettings"]}, " prim to render with. If this is blank, the node looks for default render settings on the root prim. If the root prim has no render settings, the node will use default settings."], "extent": [4631, 4854]}], "container": true, "attrs": {"id": "rendersettings"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Override Camera"], "extent": [4854, 4871], "body": [{"type": "para", "indent": 4, "text": ["Scene graph path to the ", {"type": "code", "text": ["Camera"]}, " prim to render from. If this is blank, the node uses the camera specified on the render settings primitive."], "extent": [4897, 5043]}], "container": true, "attrs": {"id": "override_camera"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Override Output Image"], "extent": [5043, 5066], "body": [{"type": "para", "indent": 4, "text": ["If this is not blank, render to this file path instead of the output specified in the ", {"type": "code", "text": ["RenderSettings"]}, " prim. When starting a new render process for each frame, this parameter can use standard Houdini variables such as ", {"type": "code", "text": ["$F4"]}, " to specify unique per-frame image files. When ", {"type": "code", "text": ["Render All Frames With a Single Process"]}, " is enabled, this parameter must pass an un-expanded frame specifier (such as ", {"type": "code", "text": ["$F4"]}, " or ", {"type": "code", "text": ["<FF>"]}, ") to ", {"type": "code", "text": ["husk"]}, ". This may require the use of a backslash to prevent variable expansion when evaluating the parameter."], "extent": [5088, 5611]}], "container": true, "attrs": {"id": "outputimage"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Override Resolution"], "extent": [5611, 5632], "body": [{"type": "para", "indent": 4, "text": ["Override the resolution by either scaling the USD resolution by a percentage or by specifying a specific resolution."], "extent": [5655, 5777]}], "container": true, "attrs": {"id": "override_res"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Resolution Scale"], "extent": [5777, 5795], "body": [{"type": "para", "indent": 4, "text": ["Specify a scale (as a percentage) for the output resolution."], "extent": [5815, 5881]}], "container": true, "attrs": {"id": "res_scale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Resolution"], "extent": [5881, 5893], "body": [{"type": "para", "indent": 4, "text": ["Specify a resolution explicitly."], "extent": [5912, 5950]}], "container": true, "attrs": {"id": "res_user"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Husk"], "extent": [5950, 5961], "body": [{"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Rendering"], "extent": [5961, 5980], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Instantaneous Shutter"], "extent": [5980, 6004], "body": [{"type": "para", "indent": 4, "text": ["Disable motion blur by setting the camera to have an instantaneous shutter time."], "extent": [6004, 6090]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Headlight Mode"], "extent": [6090, 6106], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "code", "text": ["husk"]}, " determines there are no lights on a stage, it will add a headlight.  In some cases, ", {"type": "code", "text": ["husk"]}, " may not properly identify geometry light sources and add a headlight erroneously.  This option overrides the default behaviour, explicitly telling ", {"type": "code", "text": ["husk"]}, " what type of headlight to create (if any)."], "extent": [6130, 6435]}], "container": true, "attrs": {"id": "husk_headlight"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Population Mask"], "extent": [6435, 6452], "body": [{"type": "para", "indent": 4, "text": [{"type": "strong", "text": ["Comma"]}, " or ", {"type": "strong", "text": ["space"]}, " separated list of primitives that have to included in the render. If this is enabled, all other primitives will be omitted."], "extent": [6482, 6630]}], "container": true, "attrs": {"id": "husk_populationmask"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Include Render Settings and Cameras"], "extent": [6630, 6667], "body": [{"type": "para", "indent": 4, "text": ["Enabling this will append all cameras found in the stage, as well as the render settings (assuming they're in ", {"type": "code", "text": ["/Render"]}, ") to the population mask."], "extent": [6704, 6854]}], "container": true, "attrs": {"id": "husk_rendersettingsandcams"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Purpose"], "extent": [6854, 6863], "body": [{"type": "para", "indent": 4, "text": [{"type": "strong", "text": ["Comma"]}, " separated list of purposes to render (from ", {"type": "code", "text": ["geometry"]}, ", ", {"type": "code", "text": ["guide"]}, ", ", {"type": "code", "text": ["proxy"]}, ", and ", {"type": "code", "text": ["render"]}, "). The default is ", {"type": "code", "text": ["geometry,render"]}, "."], "extent": [6886, 7021]}], "container": true, "attrs": {"id": "husk_purpose"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Complexity"], "extent": [7021, 7033], "body": [{"type": "para", "indent": 4, "text": ["This setting is defined by USD and Hydra to control for the number of iterations to use to render ", {"type": "q", "text": ["refine-able"]}, " (subdivision) surfaces. Karma mostly ignores this setting, since it measures the surface in screen space to decide how many iterations it needs to render the surface smoothly. Instead, ", {"type": "strong", "text": ["Karma uses this setting more like a subdivision on/off switch"]}, ". If this is set to ", {"type": "ui", "text": ["Low"]}, " or ", {"type": "ui", "text": ["Medium"]}, ", Karma renders the (chunky) hull. If it is ", {"type": "ui", "text": ["High"]}, " or ", {"type": "ui", "text": ["Very High"]}, ", Karma renders the (smooth) limit surface."], "extent": [7059, 7578]}, {"type": "para", "indent": 4, "text": ["Other renderers (such as RenderMan or Storm) will treat this setting differently, using it to determine subdivision quality. If you need to render the same scene in Karma and another renderer, remember to use ", {"type": "ui", "text": ["High"]}, " or ", {"type": "ui", "text": ["Very High"]}, " to make sure Karma renders subdivision surfaces smoothly."], "extent": [7578, 7876]}], "container": true, "attrs": {"id": "husk_complexity"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Enable Legacy EXR Mode"], "extent": [7876, 7900], "body": [{"type": "para", "indent": 4, "text": ["When saving OpenEXR images with multiple AOVs, ", {"type": "code", "text": ["husk"]}, " will normally save the images using multi-part EXR files.  This extension (introduced in 2013) lets programs read a single AOV without having to read the entire image.  This allows most software to work much more efficiently."], "extent": [7925, 8210]}, {"type": "para", "indent": 4, "text": ["Some applications have not transitioned to support multi-part images.  If your pipeline uses software that doesn\u2019t support OpenEXR v2.0, this option will force ", {"type": "code", "text": ["husk"]}, " to write out images in an inefficient, but more compatible format."], "extent": [8210, 8449]}], "container": true, "attrs": {"id": "husk_legacyexr"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Delegate Products"], "extent": [8449, 8468], "body": [{"type": "para", "indent": 4, "text": ["Turn on render delegate products.  These allow render delegates to save non-raster products like deep images or photon maps.  These render products are render delegate specific."], "extent": [8468, 8651]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Restart Delegate"], "extent": [8651, 8669], "body": [{"type": "para", "indent": 4, "text": ["Normally, when rendering sequences, ", {"type": "code", "text": ["husk"]}, " uses UDS delta operations to make rendering more efficient.  The delegate is only told about scene data that changes frame-to-frame so it can share work between frames."], "extent": [8669, 8886]}, {"type": "para", "indent": 4, "text": ["This option will force the render delegate to be restarted when rendering sequences."], "extent": [8886, 8976]}, {"type": "para", "indent": 4, "text": ["Since restarting the delegate will cause the scene to be rebuilt, using this option can have significant performance impact and should only be used if required."], "extent": [8976, 9142]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Snapshot Interval"], "extent": [9142, 9161], "body": [{"type": "para", "indent": 4, "text": ["Whenturned on, the renderer writes out a snapshot file and partial image at every interval of this many seconds."], "extent": [9161, 9279]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Time Limit"], "extent": [9279, 9291], "body": [{"type": "para", "indent": 4, "text": ["When turned on, the renderer will terminate if the render time limit is exceeded. ", {"type": "ui", "text": ["Time Limit"]}, " is measured in seconds. Note that ", {"type": "code", "text": ["husk"]}, " will save the partial result before terminating."], "extent": [9291, 9483]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Time Limit Per-Image"], "extent": [9483, 9505], "body": [{"type": "para", "indent": 4, "text": ["When rendering multiple frames in a single process (Render All Frames With a Single Process), the time limit specified is applied per image rather than the entire sequence of images."], "extent": [9505, 9693]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Monitor"], "extent": [9693, 9709], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["MPlay Monitor"], "extent": [9709, 9725], "body": [{"type": "para", "indent": 4, "text": ["When rendering to disk, open an MPlay window to interactively monitor progress."], "extent": [9746, 9831]}], "container": true, "attrs": {"id": "husk_mplay"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["AOVs"], "extent": [9831, 9837], "body": [{"type": "para", "indent": 4, "text": ["This is the list of AOVs to display in the MPlay monitor.  Specifying ", {"type": "code", "text": ["-"]}, " will monitor all AOVs."], "extent": [9837, 9939]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Monitor Zoom"], "extent": [9939, 9953], "body": [{"type": "para", "indent": 4, "text": ["This is a zoom factor applied to the monitor.  The monitor will display images at a fraction of the full resolution while the image written to disk will be full resolution."], "extent": [9978, 10156]}], "container": true, "attrs": {"id": "husk_mplayzoom"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["MPlay Session Name"], "extent": [10156, 10176], "body": [{"type": "para", "indent": 4, "text": ["When rendering to MPlay, all Houdini sessions will send the output to the same MPlay flipbook. This can be problematic when running multiple Houdini sessions. The MPlay Label lets you specify a label for the MPlay associated with the output driver. Only renders which match the given label will be sent to that MPlay."], "extent": [10201, 10524]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Houdini Process ID"], "extent": [10524, 10548], "body": [{"type": "para", "indent": 8, "text": ["Uses the operating system process identifier so that the MPlay flipbook will only accept renders from that Houdini session."], "extent": [10548, 10681]}], "container": true}, {"type": "dt", "indent": 4, "text": ["HIP Name"], "extent": [10681, 10695], "body": [{"type": "para", "indent": 8, "text": ["Uses the ", {"type": "code", "text": ["$HIPNAME"]}, " variable so the MPlay will only accept renders from the running ", {"type": "code", "text": ["$HIP"]}, " file."], "extent": [10695, 10801]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Output Driver Name"], "extent": [10801, 10825], "body": [{"type": "para", "indent": 8, "text": ["The MPlay flipbook will only accept renders from the given output driver. For example, if you copy paste the output driver, each output driver will be sent to different MPlay flipbooks because the operators will have different names."], "extent": [10825, 11068]}, {"type": "para", "indent": 8, "text": ["If there are multiple Houdini sessions, there may be output drivers in the other session which match the same operator name."], "extent": [11068, 11202]}, {"type": "para", "indent": 8, "text": ["For example, say you have two output drivers: ", {"type": "q", "text": ["High quality"]}, " and ", {"type": "q", "text": ["Low Quality"]}, ". If you set the MPlay Label to different values for the two output drivers, each render will be sent to different MPlay sessions."], "extent": [11202, 11421]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "husk_mplayname"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Python"], "extent": [11421, 11436], "body": [{"type": "para", "indent": 0, "text": ["Similar to how Houdini can run scripts during rendering, ", {"type": "code", "text": ["husk"]}, " can also run Python scripts.  These Python scripts can access the Usd stage using the ", {"type": "code", "text": ["stage"]}, " variable in Python."], "extent": [11436, 11616]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Husk Pre-Render"], "extent": [11616, 11633], "body": [{"type": "para", "indent": 4, "text": ["The Python script ", {"type": "code", "text": ["husk"]}, " runs before any rendering begins."], "extent": [11633, 11697]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Husk Pre-Frame"], "extent": [11697, 11713], "body": [{"type": "para", "indent": 4, "text": ["The Python script ", {"type": "code", "text": ["husk"]}, " runs before rendering each frame."], "extent": [11713, 11777]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Husk Post-Frame"], "extent": [11777, 11794], "body": [{"type": "para", "indent": 4, "text": ["The Python script ", {"type": "code", "text": ["husk"]}, " runs after rendering each frame.  This is run after all render products are saved."], "extent": [11794, 11907]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Husk Post-Render"], "extent": [11907, 11925], "body": [{"type": "para", "indent": 4, "text": ["The Python script ", {"type": "code", "text": ["husk"]}, " runs after all rendering."], "extent": [11925, 11982]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Tiles"], "extent": [11982, 11996], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Tiled Render"], "extent": [11996, 12011], "body": [{"type": "para", "indent": 4, "text": [{"type": "code", "text": ["husk"]}, " can break up a single large image into multiple tiles and render each tile independently.  It does this by overriding the ", {"type": "code", "text": ["dataWindowNDC"]}, " setting defined on the render settings."], "extent": [12011, 12201]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Count"], "extent": [12201, 12208], "body": [{"type": "para", "indent": 4, "text": ["The number of tiles in the X and Y resolutions."], "extent": [12208, 12261]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Index"], "extent": [12261, 12268], "body": [{"type": "para", "indent": 4, "text": ["This is the tile that ", {"type": "code", "text": ["husk"]}, " should render.  The value should be between ", {"type": "code", "text": ["0"]}, " and the total number of tiles (", {"type": "code", "text": ["Count.x*Count.y"]}, ")."], "extent": [12268, 12401]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Suffix"], "extent": [12401, 12409], "body": [{"type": "para", "indent": 4, "text": ["Each output image will be suffixed with this string.  The string supports the same variable expansion ", {"type": "code", "text": ["husk"]}, " does on output images, but replacing the ", {"type": "code", "text": ["%02d"]}, " with the tile index instead of the frame number."], "extent": [12409, 12621]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Statistics"], "extent": [12621, 12640], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Print Command Line to Console"], "extent": [12640, 12672], "body": [{"type": "para", "indent": 4, "text": ["This option can be used to debug exactly what command the ROP is executing."], "extent": [12672, 12753]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Verbose"], "extent": [12753, 12762], "body": [{"type": "para", "indent": 4, "text": ["How much information to print out while rendering."], "extent": [12779, 12835]}], "container": true, "attrs": {"id": "verbose"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["VEX Profiling"], "extent": [12835, 12850], "body": [{"type": "para", "indent": 4, "text": ["Profile VEX performance while rendering.  Normally, you should avoid ", {"type": "q", "text": ["Profiling and NAN Detection"]}, " since it can impact performance (though it can be useful for debugging)"], "extent": [12870, 13046]}], "container": true, "attrs": {"id": "vexprofile"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["USD Trace"], "extent": [13046, 13057], "body": [{"type": "para", "indent": 4, "text": ["This enables USD tracing.  This information can be used to profile Usd performance in ", {"type": "code", "text": ["husk"]}, "."], "extent": [13083, 13182]}], "container": true, "attrs": {"id": "husk_usdtracing"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Chrome File"], "extent": [13182, 13195], "body": [{"type": "para", "indent": 4, "text": ["When using Chrome tracing, this is the file where the trace log should be stored."], "extent": [13221, 13308]}], "container": true, "attrs": {"id": "husk_chromefile"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Log Output"], "extent": [13308, 13320], "body": [{"type": "para", "indent": 4, "text": ["Capture the output from ", {"type": "code", "text": ["husk"]}, " and store the log in a file on disk."], "extent": [13339, 13412]}], "container": true, "attrs": {"id": "husk_log"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Append to Log Instead of Overwriting"], "extent": [13412, 13450], "body": [{"type": "para", "indent": 4, "text": ["Normally ", {"type": "code", "text": ["husk"]}, " will overwrite the log file on each run.  This option will cause output to be appended to the text in existing files."], "extent": [13475, 13614]}], "container": true, "attrs": {"id": "husk_logappend"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Output Log"], "extent": [13614, 13626], "body": [{"type": "para", "indent": 4, "text": ["This is the file where normal messages should be saved."], "extent": [13648, 13709]}], "container": true, "attrs": {"id": "husk_stdout"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Error Log"], "extent": [13709, 13720], "body": [{"type": "para", "indent": 4, "text": ["This is the file to which error messages should be saved. If this is the same file specified for the Output Log, the output and error messages will be interleaved (in the same way they are written to the console)."], "extent": [13742, 13961]}], "container": true, "attrs": {"id": "husk_stderr"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Slap Comp"], "extent": [13961, 13979], "body": [{"type": "para", "indent": 0, "text": ["This tab specifies the ", {"scheme": null, "value": "/copernicus/slap_comp", "type": "link", "text": ["Slap Comp"], "fullpath": "/copernicus/slap_comp.html"}, " operations to process after rendering. Each compositing operation is performed on the rendered image in sequence."], "extent": [13979, 14152]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Enabled"], "extent": [14152, 14161], "body": [{"type": "para", "indent": 4, "text": ["Turn this Slap Comp operation on or off."], "extent": [14185, 14231]}], "container": true, "attrs": {"id": "husk_sc_enable"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Source"], "extent": [14231, 14239], "body": [{"type": "para", "indent": 4, "text": ["You can choose, whther you want to use a source from a ", {"type": "ui", "text": ["File"]}, " or a ", {"type": "ui", "text": ["COP Network"]}, "."], "extent": [14263, 14354]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["File"], "extent": [14354, 14364], "body": [{"type": "para", "indent": 8, "text": ["Specify the COP network as an APEX graph from a disk file"], "extent": [14364, 14430]}], "container": true}, {"type": "dt", "indent": 4, "text": ["COP Netowrk"], "extent": [14430, 14447], "body": [{"type": "para", "indent": 8, "text": ["Specify a path to a Block End LOP of a COP network."], "extent": [14447, 14508]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "husk_sc_source"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["File"], "extent": [14508, 14514], "body": [{"type": "para", "indent": 4, "text": ["The path to a geometry file on disk. The geometry file should contain an APEX graph of a COP network."], "extent": [14536, 14643]}], "container": true, "attrs": {"id": "husk_sc_file"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Cop Node"], "extent": [14643, 14653], "body": [{"type": "para", "indent": 4, "text": ["The path to the Block End COP of a Compile Block COP."], "extent": [14674, 14733]}], "container": true, "attrs": {"id": "husk_sc_cop"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Label"], "extent": [14733, 14740], "body": [{"type": "para", "indent": 4, "text": ["An optional label to identify this slap comp operation when ", {"type": "code", "text": ["husk"]}, " prints out messages."], "extent": [14763, 14856]}], "container": true, "attrs": {"id": "husk_sc_label"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Map Input"], "extent": [14856, 14867], "body": [{"type": "para", "indent": 4, "text": ["Sometimes, the AOV names being rendered don\u2019t match the input names for the Compile Block COP. This parameter lets you create a mapping of AOV names to COP input names. You can create a rule for each name you want to map."], "extent": [14893, 15120]}], "container": true, "attrs": {"id": "husk_sc_mapinput"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Map Output"], "extent": [15120, 15132], "body": [{"type": "para", "indent": 4, "text": ["Sometimes, the names of an Output COP don\u2019t match the AOV names being rendered. This parameter lets you create a mapping of COP outputs to AOV names. You can create a rule for each name you want to map."], "extent": [15159, 15367]}], "container": true, "attrs": {"id": "husk_sc_mapoutput"}, "role": "item"}], "container": true, "role": "item_group"}]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Output"], "extent": [15367, 15380], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Render Command"], "extent": [15380, 15397], "body": [{"type": "para", "indent": 4, "text": ["This is the external command used to render. If this parameter is disabled (by turning off the ", {"type": "ui", "text": ["Run command"]}, " parameter) the command is not executed. The USD scene will still be output to disk, and the command will be output to the console (if ", {"type": "ui", "text": ["Print command line to console"]}, " is turned on), but the command will not actually be run. Disabling the running of the command also prevents the deletion of the generated USD files, even if they are in the Houdini temp directory. This mode can be very useful for debugging or for batch farm rendering."], "extent": [15420, 15973]}], "container": true, "attrs": {"id": "rendercommand"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Render Existing File"], "extent": [15973, 15995], "body": [{"type": "para", "indent": 4, "text": ["Use this option to render an existing USD file from disk rather than the input lop."], "extent": [16021, 16110]}], "container": true, "attrs": {"id": "dorenderexisting"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Resolver Context Asset Path"], "extent": [16110, 16139], "body": [{"type": "para", "indent": 4, "text": ["This file path is passed to the render command line as the ", {"type": "code", "text": ["resolver-context"]}, " option. This argument is used to create an asset resolver context that helps the asset resolver find files while composing the USD stage. The default of this parameter is an expression that returns the corresponding parameter on the LOP Network that contains the selected ", {"type": "ui", "text": ["LOP path"]}], "extent": [16165, 16533]}], "container": true, "attrs": {"id": "resolvercontext"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Number of Resolver Context Strings"], "extent": [16533, 16569], "body": [{"type": "para", "indent": 4, "text": ["These arguments are passed to the render command line with the ", {"type": "code", "text": ["render-context-string"]}, " option. The resolver context can be configured using multiple separate strings. Each string is used to configure one resolver. One string (with no URL prefix specified) is sent to the default resolver used for all asset paths that are not in URL format. Other strings can be paired with a URL prefix to configure the resolver associated with that prefix."], "extent": [16601, 17048]}, {"type": "para", "indent": 4, "text": ["If there is at least one non-empty resolver context string value provided, this takes precedence over any resolver context asset path, and the resolver context for the LOP stage will be created using the ", {"type": "code", "text": ["ArResolver::CreateContextFromStrings"]}, " method instead of ", {"type": "code", "text": ["ArResolver::CreateDefaultContextForAsset"]}, "."], "extent": [17048, 17358]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Enable"], "extent": [17358, 17370], "body": [{"type": "para", "indent": 8, "text": ["Individual resolver context configuration strings can be enabled or disabled with this toggle."], "extent": [17370, 17474]}], "container": true}, {"type": "dt", "indent": 4, "text": ["URL Prefix"], "extent": [17474, 17490], "body": [{"type": "para", "indent": 8, "text": ["This string value will be sent to the resolver responsible for the specified URL prefix. If no prefix is provided, this string value will be sent to the default resolver."], "extent": [17490, 17670]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Value"], "extent": [17670, 17681], "body": [{"type": "para", "indent": 8, "text": ["The string value sent to the resolver determined by the URL Prefix."], "extent": [17681, 17758]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "resolvercontextstrings"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Number of Variant Selection Fallback Rules"], "extent": [17758, 17802], "body": [{"type": "para", "indent": 4, "text": ["These parameters are passed to the render command line with the ", {"type": "code", "text": ["variant-fallback"]}, " option. Configures what variant selection fallback values to use for specific variant sets when no explicit variant selection opinion is provided on a prim. These fallback rules are applied on top of any global variant selection fallbacks configured using the USD library plugin mechanism."], "extent": [17833, 18211]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Enable"], "extent": [18211, 18223], "body": [{"type": "para", "indent": 8, "text": ["A specific variant set fallback setting can be disabled with this toggle."], "extent": [18223, 18306]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Variant Set Name"], "extent": [18306, 18328], "body": [{"type": "para", "indent": 8, "text": ["Name of the variant set to configure."], "extent": [18328, 18375]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Fallback Selections"], "extent": [18375, 18400], "body": [{"type": "para", "indent": 8, "text": ["A space or comma separated list of variant selection values to attempt to use on this variant set when no explicit variant selection opinion is available."], "extent": [18400, 18564]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "variantselectioncount"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Wait for Render to Complete"], "extent": [18564, 18593], "body": [{"type": "para", "indent": 4, "text": ["Causes Houdini to freeze after starting the render process, and only resume when the renderer exits. (This is included mostly for parameter parity with the old Mantra render nodes. It may be useful to implement a crude form of dependency ordering when batch rendering.)"], "extent": [18619, 18894]}], "container": true, "attrs": {"id": "soho_foreground"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Alfred Style Progress"], "extent": [20598, 20621], "body": [{"type": "para", "indent": 8, "text": ["Print percentage complete value as files are written. This is in the style expected by Pixar\u2019s Alfred render queue."], "extent": [20647, 20772]}], "container": true, "attrs": {"id": "alfprogress"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Create Intermediate Directories"], "extent": [18921, 18954], "body": [{"type": "para", "indent": 4, "text": ["Create intermediate parent directories for output files as needed, such as for generated images."], "extent": [18971, 19073]}], "container": true, "attrs": {"id": "mkpath"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Maximum Threads"], "extent": [19073, 19090], "body": [{"type": "para", "indent": 4, "text": ["Uses the ", {"type": "code", "text": ["-j"]}, " command line option to ", {"type": "code", "text": ["husk"]}, " to specify the maximum number of threads that process should use. This parameter can be enabled to ensure that some portion of the computer\u2019s processing powere remains available for tasks other than the render. Positive values specify an absolute number of threads. Negative values indicate that the number of threads should be equal to the number of CPU cores on the machines minus the specified number."], "extent": [19090, 19544]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Initialize Simulation OPs"], "extent": [20499, 20526], "body": [{"type": "para", "indent": 4, "text": ["Initialize DOP simulations before rendering."], "extent": [20548, 20598]}], "container": true, "attrs": {"id": "initsim"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Report Network Use"], "extent": [20772, 20792], "body": [{"type": "para", "indent": 8, "text": ["Print the number of bytes sent or received by the distributed simulation nodes during cooks triggered by this node."], "extent": [20820, 20949]}, {"type": "para", "indent": 4, "text": ["This does not track network usage from, for example, saving a file to an NFS mount. It only tracks the network communication of distributed Houdini nodes."], "extent": [20949, 21112]}], "container": true, "attrs": {"id": "reportnetwork"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["USD Export"], "extent": [19596, 19615], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Output File"], "extent": [3837, 3850], "body": [{"type": "para", "indent": 8, "text": ["The ", {"type": "q", "text": ["top-level"]}, " USD file to write the root layer to. Other layers that have file path metadata set will be written to their own USD files. A default output processor (see below) translates external file references in nodes to be relative to this file\u2019s directory, as is recommended."], "extent": [3874, 4166]}], "container": true, "attrs": {"id": "lopoutput"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Delete Files"], "extent": [19641, 19655], "body": [{"type": "para", "indent": 4, "text": ["Controls whether or not files (USD and VDB) saved to disk are deleted when the render process completes. In addition to deleting the files, any containing directories are also deleted if they are empty after deleting the USD. The modes of operation are:"], "extent": [19677, 19936]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Delete if Saved to Temp Directory"], "extent": [19936, 19975], "body": [{"type": "para", "indent": 8, "text": ["Files saved to the Houdini temporary directory (", {"type": "code", "text": ["$HOUDINI_TEMP_DIR"]}, ") are deleted. Files saved to any other directory are not deleted."], "extent": [19975, 20118]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Always Delete"], "extent": [20118, 20137], "body": [{"type": "para", "indent": 8, "text": ["All files generated by this ROP are deleted."], "extent": [20137, 20191]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Never Delete"], "extent": [20191, 20209], "body": [{"type": "para", "indent": 8, "text": ["Files generated by this ROP are not deleted."], "extent": [20209, 20263]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "deletefiles"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Save Style"], "extent": [4166, 4178], "body": [{"type": "para", "indent": 8, "text": ["This node can apply some transformations to the layer stack before writing out files. These transformations do not affect the final composed stage, only the number of layer files generated."], "extent": [4202, 4401]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Flatten Implicit Layers (Collapse Implicit Sublayers, Preserve References)"], "extent": [4401, 4485], "body": [{"type": "para", "indent": 16, "text": ["The default. Composes anonymous in-memory layers down onto the nearest layer with a file path (so the node will write out any layers that have file path metadata to separate USD files). This preserves references, variants, and other composition arcs."], "extent": [4485, 4753]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Flatten All Layers (Combine All Sublayers, Preserve References)"], "extent": [4753, 4826], "body": [{"type": "para", "indent": 16, "text": ["This composes all layers (both anonymous layers and layers with file paths) into a single layer. This preserves references, variants, and other composition arcs, so the node may still write out more than one file if external files were referenced in."], "extent": [4826, 5094]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Separate Layers (Preserve All Sublayers and References)"], "extent": [5094, 5159], "body": [{"type": "para", "indent": 16, "text": ["Don\u2019t compose any layers in any way. Even anonymous in-memory layers will be saved out to their own files (you should turn off ", {"type": "ui", "text": ["Error saving layers with implicit paths"]}, " so the node doesn\u2019t error trying to save anonymous layers)."], "extent": [5159, 5407]}, {"type": "para", "indent": 16, "text": ["This may be useful for debugging, especially in combination with debug flags on nodes, to see what each LOP node is doing."], "extent": [5407, 5547]}, {"type": "para", "indent": 16, "text": ["When the node has to write out a layer without file path metadata, it will automatically generate a relative file path based on information such as the node path of the node that generated the layer."], "extent": [5547, 5764]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Flatten Stage (Collapse All Sublayers and References)"], "extent": [5764, 5827], "body": [{"type": "para", "indent": 16, "text": ["This flattens all layers into a single stage, and ", {"type": "q", "text": ["bakes in"]}, " all composition arcs, even variant selections. This discards information such as which opinions came from which layer, and unused variants. This writes out a single USD file."], "extent": [5827, 6080]}, {"type": "para", "indent": 16, "text": ["This may be useful if you want to ", {"type": "q", "text": ["delete history"]}, " and make it seem like it a file wasn\u2019t composed from layers, references, variants, and so on."], "extent": [6080, 6242]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 16, "role": "item", "extent": [6242, 6263], "body": [{"type": "para", "indent": 24, "text": ["If you want to ", {"type": "q", "text": ["preserve history"]}, " but want the convenience and portability of a single file, use the ", {"scheme": "Node", "value": "/nodes/out/usdzip", "type": "link", "text": ["USD Zip render node"], "fullpath": "/nodes/out/usdzip.html"}, " to generate a ", {"type": "code", "text": [".usdz"]}, " file."], "extent": [6263, 6455]}], "container": true}], "container": true, "role": "item_group"}], "container": true}], "container": true}], "container": true, "attrs": {"id": "savestyle"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Strip Layers Above Layer Breaks"], "extent": [6455, 6488], "body": [{"type": "para", "indent": 8, "text": ["Enable this option to prevent layers authored above Layer Break nodes from being written to disk by this ROP. This allows a Layer Break node to dictate which portions of the LOP Network are to be saved. Disabling this option allows this behavior to be overridden, forcing the full stage authored by the LOP network to be written to disk. This may be used for debugging purposes, or to write a complete scene to disk for rendering."], "extent": [6519, 6959]}], "container": true, "attrs": {"id": "striplayerbreaks"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Strip Post-Layers"], "extent": [6959, 6978], "body": [{"type": "para", "indent": 8, "text": ["Enable this option to prevent layers added using the ", {"scheme": "Hom", "value": "/hom/hou/LopNetwork#editablePostLayer", "type": "link", "text": "", "fallback_text": "hou.LopNetwork.editablePostLayer", "fullpath": "/hom/hou/LopNetwork.html#editablePostLayer", "fragment": "#editablePostLayer"}, " method from being written to disk. With this option disabled, these post-layers are flattened into the layer ", {"type": "ui", "text": ["Output file"]}, " layer."], "extent": [7008, 7241]}], "container": true, "attrs": {"id": "strippostlayers"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Track Primitive Existence to Set Visibility"], "extent": [8323, 8368], "body": [{"type": "para", "indent": 8, "text": ["LOP networks may generate vastly different scene graphs from one frame to the next. When combining these scene graphs over a frame range into a single animated scene graph, the set of primitives in the combined scene graph will be the union of the primitives in each frame\u2019s hierarchy. But if a mesh appears at frame 50, this generally means that it is desired for this mesh to not be visible prior to frame 50. Enable this option to cause this node to track a list of all primitives at each frame, and automatically author animated visibility attributes for any primitives that are added to or removed from the scene graph over time. This gives the appearance of primitives being added and removed over time."], "extent": [8401, 9120]}, {"type": "para", "indent": 8, "text": ["Only subclasses of ", {"type": "code", "text": ["UsdGeomImageable"]}, " primitives will be tracked this way, since these are the only USD primitive types which respect the visibility attribute."], "extent": [9120, 9289]}], "container": true, "attrs": {"id": "trackprimexistence"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Use Network Drive Safe Save (Windows Only)"], "extent": [9289, 9333], "body": [{"type": "para", "indent": 8, "text": ["When running on Windows, the USD library often has issues saving layers to network mounted drives when those layers are currently loaded into a USD stage. This can make it impossible to overwrite a USD layer that is in use, even by the current Houdini session. This option works around this issue by having the USD ROP mute each layer right before ti is saved to disk (but only when running under Windows - on Linux and MacOS this parameter has no effect). Once the layer is saved, it is un-muted. This approach incurs a performance penalty as any stages using this layer will be recomposed twice instead of once. But in some settings this can make the save process much more robust."], "extent": [9366, 10059]}], "container": true, "attrs": {"id": "usenetworksafesave"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 4, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Extra files"], "extent": [10059, 10077], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 8, "text": ["Files to Save"], "extent": [10108, 10131], "body": [{"type": "para", "indent": 16, "text": ["A list of patterns matching which files the node is ", {"type": "em", "text": ["allowed"]}, " to save. If this is blank (the default), the node saves all files. You can use this, for example, to avoid rewriting layer files that you know will never change."], "extent": [10131, 10372]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Error Saving Layers With Implicit Paths"], "extent": [10372, 10421], "body": [{"type": "para", "indent": 16, "text": ["When this is on (the default), the node errors if it would otherwise write an anonymous in-memory layer (that is, a layer with no file path metadata) to disk."], "extent": [10421, 10597]}, {"type": "para", "indent": 16, "text": ["You will usually only turn this off if you are using the ", {"type": "ui", "text": ["Save style"]}, " ", {"type": "q", "text": ["Separate layers"]}, " to write out every layer separate for debugging purposes."], "extent": [10597, 10762]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Save Updates to Modified Files From Disk"], "extent": [10762, 10812], "body": [{"type": "para", "indent": 16, "text": ["If you use the ", {"scheme": "Node", "value": "/nodes/lop/loadlayer", "type": "link", "text": ["Load Layer LOP"], "fullpath": "/nodes/lop/loadlayer.html"}, " to bring a layer onto the stage, this ", {"type": "q", "text": ["editable"]}, " version of the layer on disk has metadata marking it as originally coming from disk, rather than being created from scratch by LOPs. When this is on, layers created this way are saved to disk just like any other layer with file path metadata."], "extent": [10852, 11212]}, {"type": "para", "indent": 16, "text": ["Turning this off prevents saving these layers to disk. This can be useful if you never want these ", {"type": "q", "text": ["edited from disk"]}, " layers to overwrite the original files, or at least prevent overwriting them until you are certain the output of the LOP network is correct, when you can allow the edited layers to be written to disk."], "extent": [11212, 11547]}], "container": true, "attrs": {"id": "savefilesfromdisk"}, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Flatten File Layers"], "extent": [11547, 11576], "body": [{"type": "para", "indent": 16, "text": ["When ", {"type": "ui", "text": ["Save Style"]}, " is ", {"type": "q", "text": ["Flatten Implicit Layers"]}, ", files loaded from disk with a Sublayer LOP are not considered anonymous layers, and so are not composed down. Turn this on to flatten layers from disk as if they were anonymous layers. This can be useful for generating more portable USD layers that rely on a minimal number of external layers. It can also be used to ", {"type": "q", "text": ["harden"]}, " the sublayered files on disk in their current state if they may be changing, but you are generating a USD file for archiving purposes and do not want it to reflect any upcoming changes to the external files."], "extent": [11576, 12177]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Flatten SOP Layers"], "extent": [12177, 12205], "body": [{"type": "para", "indent": 16, "text": ["When ", {"type": "ui", "text": ["Save Style"]}, " is ", {"type": "q", "text": ["Flatten Implicit Layers"]}, ", layers generated by importing data from SOPs with ", {"scheme": "Node", "value": "/nodes/lop/sopimport", "type": "link", "text": ["SOP Import"], "fullpath": "/nodes/lop/sopimport.html"}, " are not considered anonymous layers, and so are not composed down. Turn this on to flatten layers imported from SOPs as if they were anonymous layers. This can be useful for generating more portable USD layers that rely on a minimal number of external layers."], "extent": [12205, 12615]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}], "attrs": {"id": "extrafiles_group"}}, {"level": 4, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Output processing"], "extent": [12615, 12639], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 8, "text": ["Output Processors"], "extent": [12676, 12703], "body": [{"type": "para", "indent": 16, "text": ["Add an ", {"scheme": null, "value": "/solaris/output#processors", "type": "link", "text": ["output processor"], "fullpath": "/solaris/output.html#processors", "fragment": "#processors"}, " to this node. Output processors are Python plugins that can alter the file locations and file path strings used for external files. The USD render node starts with one default output processor (called ", {"type": "code", "text": ["Use Relative Paths"]}, ", see below)."], "extent": [12742, 13047]}, {"type": "para", "indent": 16, "text": ["(See ", {"scheme": null, "value": "/solaris/output#processors", "type": "link", "text": ["output processors"], "fullpath": "/solaris/output.html#processors", "fragment": "#processors"}, " for information on how to write an output processor plugin.)"], "extent": [13047, 13177]}, {"type": "para", "indent": 16, "text": ["The following built-in processors are available:"], "extent": [13177, 13243]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 16, "text": ["Use Relative Paths"], "extent": [13243, 13279], "body": [{"type": "para", "indent": 24, "text": ["This is automatically added by default. This processor changes absolute file paths to relative paths in layer files. This allows you to use paths such as ", {"type": "code", "text": ["$HIP/usd/foo.usd"]}, " for loading, but have them written out as paths relative to the source file. This is recommended practice so you probably do not want to remove this processor."], "extent": [13279, 13637]}], "container": true}, {"type": "dt", "indent": 16, "text": ["Make Output Layer Extension"], "extent": [13637, 13682], "body": [{"type": "para", "indent": 24, "text": ["Normally, if you change the extension of the output file, it only affects that ", {"type": "q", "text": ["top-level"]}, " output file. All other external files are written to their embedded save paths, with their embedded extension. This processor changes the extension on all paths to match the extension of the output file. This means if you change the output file to use ", {"type": "code", "text": [".usda"]}, " (the textual format), when this processor is active, all external USD files will also switch to ", {"type": "code", "text": [".usda"]}, "."], "extent": [13682, 14163]}], "container": true}, {"type": "dt", "indent": 16, "text": ["Save Paths Relative to Output Path"], "extent": [14163, 14215], "body": [{"type": "para", "indent": 24, "text": ["Causes any Save Path parameters that are relative paths to be treated as if they are relative to the Output File parameter value. This makes it easy to ensure all files generated by a LOP network are saved into a common root directory. Changing the save location of the output file will implicitly change the save location of all other files."], "extent": [14215, 14583]}, {"type": "para", "indent": 24, "text": ["This processor has a ", {"type": "ui", "text": ["Root Directory"]}, " parameter which, if set, specifies a location other than the Output File to which Save Paths will be considered relative."], "extent": [14583, 14770]}], "container": true}, {"type": "dt", "indent": 16, "text": ["Use Search Paths"], "extent": [14770, 14804], "body": [{"type": "para", "indent": 24, "text": ["This processor includes a Search Path parameter. Each asset path is compared against the directories listed in this path. If the asset is inside one of the search paths, the asset will be referenced with a search path rather than a full path or relative path."], "extent": [14804, 15089]}], "container": true}, {"type": "dt", "indent": 16, "text": ["Copy All Assets to Referencing Layer Directory"], "extent": [15089, 15153], "body": [{"type": "para", "indent": 24, "text": ["This processor makes copies of all non-USD assets (such as UDIMs, texture maps, and volume files) in the same directory as the USD file that references them. The USD file is updated to refer to these local copies of the assets. These updated references will use absolute paths, so it is recommended that you use this in conjunction with a ", {"type": "code", "text": ["Use Relative Paths"]}, " output processor. This localizing of assets makes it much easier to create USDZ archives of assets, since that format requires texture maps and similar assets to be in or contained under same directory holding the USD file."], "extent": [15153, 15762]}, {"type": "para", "indent": 24, "text": ["This processor has an ", {"type": "ui", "text": ["Output subdirectory"]}, " parameter which causes the assets to be copied into a specific subdirectory inside the directory where the USD file is being written. This parameter should be a relative path, such as ", {"type": "code", "text": ["textures"]}, ", not a full path to a directory."], "extent": [15762, 16061]}, {"type": "para", "indent": 24, "text": ["USD assets are not localized because doing so would break relative path references within those USD files. If USD data must also be localized to a single directory, it is recommended that this be accomplished by setting the ", {"type": "code", "text": ["Save Style"]}, " on the USD ROP to ", {"type": "code", "text": ["Flatten Stage"]}, ", which will gather all USD data into a single layer."], "extent": [16061, 16410]}, {"type": "para", "indent": 24, "text": ["If an asset file doesn\u2019t exist, or the asset file is already located in the same directory or any subdirectory of the referencing layer file, the asset is not copied."], "extent": [16410, 16602]}, {"type": "para", "indent": 24, "text": ["This output processor should be moved above the ", {"type": "q", "text": ["Use Relative Paths"]}, " output processor to ensure that the asset paths written to the USD file produce the simplest possible paths to the localized file locations."], "extent": [16602, 16838]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "outputprocessors"}, "role": "item"}], "container": true, "role": "item_group"}], "attrs": {"id": "outputprocessing_group"}}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["USD Output Directory"], "extent": [20489, 20511], "body": [{"type": "para", "indent": 4, "text": ["The directory where any required USD files will be saved. If this directory is in the ", {"type": "code", "text": ["$HOUDINI_TEMP_DIR"]}, ", it will be deleted automatically when the render is complete."], "extent": [20511, 20685]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}, {"level": 4, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Layer metadata"], "extent": [16838, 16859], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 8, "text": ["Default Primitive"], "extent": [16893, 16920], "body": [{"type": "para", "indent": 16, "text": ["Set this to the ", {"type": "strong", "text": ["name"]}, " of a root primitive on the current stage to set it as the ", {"scheme": null, "value": "/solaris/usd#default_prim", "type": "link", "text": ["default primitive"], "fullpath": "/solaris/usd.html#default_prim", "fragment": "#default_prim"}, " for the top-level file."], "extent": [16920, 17088]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Error Saving Layer With No Default Primitive"], "extent": [17088, 17142], "body": [{"type": "para", "indent": 16, "text": ["When this is on, the render node will error and stop cooking if you haven\u2019t specified a ", {"scheme": null, "value": "/solaris/usd#default_prim", "type": "link", "text": ["default primitive"], "fullpath": "/solaris/usd.html#default_prim", "fragment": "#default_prim"}, " for all layers being written out."], "extent": [17183, 17368]}, {"type": "para", "indent": 16, "text": ["This is a way to force yourself to make sure layers have default prims, so you know you can reference in files without having to manually specify a top-level prim."], "extent": [17368, 17549]}], "container": true, "attrs": {"id": "requiredefaultprim"}, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Save ROP\u2019s Time Information to Output"], "extent": [17549, 17596], "body": [{"type": "para", "indent": 16, "text": ["Write the start and end frames, as well as the current frames per second setting, to the top-level output file."], "extent": [17631, 17760]}], "container": true, "attrs": {"id": "savetimeinfo"}, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Clear Houdini-Specific Custom Data"], "extent": [17760, 17804], "body": [{"type": "para", "indent": 16, "text": ["LOP networks often attach Houdini-specific custom data to layers, prims, and properties. Houdini does not need this data to be stored on disk (usually it is related to how to write files), so by default Houdini strips out this data before saving. Normally there\u2019s no reason to turn this parameter off (it\u2019s possible it might help SideFX diagnosing a problem)."], "extent": [17849, 18226]}], "container": true, "attrs": {"id": "clearhoudinicustomdata"}, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Ensure Basic Metrics are Set on All Layers"], "extent": [18226, 18278], "body": [{"type": "para", "indent": 16, "text": ["This options ensures that the ", {"type": "code", "text": ["upAxis"]}, " and ", {"type": "code", "text": ["metersPerUnit"]}, " metadata is set in every USD file written to disk. If a value has not been explicitly authored on a layer by the LOP Network, the default up axis and meters per unit values from the Lighting Preferences are used."], "extent": [18317, 18607]}], "container": true, "attrs": {"id": "ensuremetricsset"}, "role": "item"}], "container": true, "role": "item_group"}], "attrs": {"id": "layermetadata_group"}}, {"level": 4, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Context options"], "extent": [18607, 18629], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 8, "text": ["Set ROP Cook Context Options"], "extent": [18665, 18703], "body": [{"type": "para", "indent": 16, "text": ["Controls whether this node sets the ", {"type": "code", "text": ["@ropcook"]}, ", ", {"type": "code", "text": ["@ropstart"]}, ", ", {"type": "code", "text": ["@ropend"]}, ", and ", {"type": "code", "text": ["@ropinc"]}, " context options when rendering. If enabled, these context options are automatically set to ", {"type": "code", "text": ["1"]}, " for ", {"type": "code", "text": ["@ropcook"]}, ", and the values of the Start, End, and Increment Frame values from this node for ", {"type": "code", "text": ["@ropstart"]}, ", ", {"type": "code", "text": ["@ropend"]}, ", and ", {"type": "code", "text": ["@ropinc"]}, ". Using these standard context options it is easier to set up predictable behavior for Cache LOPs, LOPs that create ranges of time sampled values, and LOP nodes that are only used for generating viewport previews or final rendered output."], "extent": [18736, 19306]}], "container": true, "attrs": {"id": "setropcook"}, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Number of Options"], "extent": [19306, 19333], "body": [{"type": "para", "indent": 16, "text": ["Lets you specify context options that only apply while writing out files from this node. Set the number of context options to define/override, or use the plus and minus buttons to add or remove options."], "extent": [19367, 19587]}, {"type": "para", "indent": 16, "text": ["You could have two separate USD render nodes with different context options, so they would write out different USD from the same LOP network depending on uses of ", {"type": "code", "text": ["@contextoption"]}, " references in expressions. This could be useful for wedging, or to cause the LOP network to configure the stage in ways that are not good for interactively, but should be written to disk."], "extent": [19587, 19971]}], "container": true, "attrs": {"id": "optioncount"}, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Option Name"], "extent": [19971, 19992], "body": [{"type": "para", "indent": 16, "text": ["For each option, the name of the option. You can reference this option in an expression using ", {"type": "code", "text": ["@", {"type": "var", "text": ["name"]}]}, "."], "extent": [20024, 20148]}], "container": true, "attrs": {"id": "optionname"}, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Option Type"], "extent": [20148, 20169], "body": [{"type": "para", "indent": 16, "text": ["For each option, the type of data stored in the option, either a floating point number of a string."], "extent": [20202, 20319]}], "container": true, "attrs": {"id": "optiontype"}, "role": "item"}, {"type": "parameters_item", "indent": 8, "text": ["Option Value"], "extent": [20319, 20341], "body": [{"type": "para", "indent": 16, "text": ["For each option, the value of the option (while this node writes out USD)."], "extent": [20375, 20467]}], "container": true, "attrs": {"id": "optionvalue"}, "role": "item"}], "container": true, "role": "item_group"}], "attrs": {"id": "contextoptions_group2"}}]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Scripts"], "extent": [20757, 20771], "body": [{"type": "para", "indent": 0, "text": ["Each script command refers to an ", {"type": "code", "text": ["hscript"]}, " command which will be run, regardless of the expression language selected for the parameter. The resulting string will be run as an ", {"type": "code", "text": ["hscript"]}, " command. It is possible to use the source ", {"type": "ui", "text": ["Hscript"]}, " or ", {"type": "ui", "text": ["Python"]}, " commands to perform complex processing."], "extent": [20771, 21066]}, {"type": "para", "indent": 0, "text": ["The commands are always run when rendering occurs. The command checks the parameters of the output driver when it is rendering a range or sending output to a command."], "extent": [21066, 21234]}, {"type": "para", "indent": 0, "text": ["Before the render occurs, Houdini will automatically set the current ", {"type": "code", "text": ["hscript"]}, " directory to point to the output driver."], "extent": [21234, 21355]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Pre-Render Script"], "extent": [21355, 21374], "body": [{"type": "para", "indent": 4, "text": ["This command is run before any USDs are generated. It is only run once per render."], "extent": [21374, 21462]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Pre-Frame Script"], "extent": [21462, 21480], "body": [{"type": "para", "indent": 4, "text": ["This command is run before each USD is generated."], "extent": [21480, 21535]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Post-Frame Script"], "extent": [21535, 21554], "body": [{"type": "para", "indent": 4, "text": ["This command is run after each USD is generated. Although the USD may have been generated, this does not necessarily mean that ", {"type": "code", "text": ["husk"]}, " has finished rendering the image when this command is run."], "extent": [21554, 21752]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Post-Render Script"], "extent": [21752, 21773], "body": [{"type": "para", "indent": 4, "text": ["This command is run one time, after all USDs have been generated. Although the USD may have been generated, this does not necessarily mean that ", {"type": "code", "text": ["husk"]}, " has finished rendering the image when this command is run."], "extent": [21773, 21986]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}], "text": "Parameters"}], "title": ["USD Render"], "summary": ["Renders an output image from the stage generated by a LOP network."], "included": ["/nodes/out/standard", "/nodes/out/usd", "/solaris/output", "/solaris/view"]}